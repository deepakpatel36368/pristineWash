<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login</title>
  <link rel="stylesheet" th:href="@{/css/loginstyle.css}" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container-fluid">

  <!-- NavBar Start -->
  <div class="row">
    <div class="col">
      <!-- Navbar 1 - Bootstrap Brain Component -->
      <nav class="navbar fixed-top navbar-expand-md bsb-navbar bsb-navbar-hover bsb-navbar-caret topNavBar"
           style="background-color: rgba(255, 255, 255, 0.90);
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.2);">
        <div class="container">
          <a class="navbar-brand" href="index.html">
            <img th:src="@{/img/Logo.svg}" alt="Pristine Wash" width="135" height="44">
          </a>
          <button class="navbar-toggler border-0" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z" />
            </svg>
          </button>
          <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
            <div class="offcanvas-header">
              <h5 class="offcanvas-title" id="offcanvasNavbarLabel">Menu</h5>
              <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
              <ul class="navbar-nav justify-content-end flex-grow-1">
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" th:href="@{/#!}" href="#!">Home</a>
                </li>
                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#!" id="accountDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Account</a>
                  <ul class="dropdown-menu border-0 shadow bsb-zoomIn" aria-labelledby="accountDropdown">
                    <li><a class="dropdown-item" th:href="@{/login.html}" href="#!">Log in</a></li>
                    <li><a class="dropdown-item" th:href="@{/logout}" href="#!">Log out</a></li>
                    <li>
                      <hr class="dropdown-divider">
                    </li>
                    <li><a class="dropdown-item" th:href="@{/login.html}" href="#!">Sign up</a></li>
                  </ul>
                </li>
                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#!" id="servicesDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Services</a>
                  <ul class="dropdown-menu border-0 shadow bsb-zoomIn" aria-labelledby="servicesDropdown">
                    <li><a class="dropdown-item" th:href="@{#!}" href="#!">Wash & Fold</a></li>
                    <li><a class="dropdown-item" th:href="@{#!}" href="#!">Dry Clean</a></li>
                    <li><a class="dropdown-item" th:href="@{#!}" href="#!">Steam & Iron</a></li>
                    <li><a class="dropdown-item" th:href="@{#!}" href="#!">Stain Removal</a></li>
                  </ul>
                </li>
                <li class="nav-item">
                  <a class="nav-link" th:href="@{/about}" href="#!">About</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" th:href="@{/contact}" href="#!">Contact</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </nav>
    </div>
  </div>
  <!-- NavBar END -->

  <!-- Login Form Section -->
  <div class="row align-self-center justify-content-center" style="height: 100vh;">
    <div class="col-md-6 col-10 align-self-center">
      <!-- Login Form -->
      <section class="text-start text-lg-start shadow-lg">
        <div class="card mb-3">
          <div class="row g-0 d-flex align-items-center">
            <div class="col-lg-4 d-none d-lg-flex loginImage"
                 style="padding: 25px; padding-right: 5px;">
              <img th:src="@{/img/loginImage.svg}" alt="Login Image"
                   class="rounded-t-5 rounded-tr-lg-0 rounded-bl-lg-5"/>
            </div>
            <div class="col-lg-8 loginForm">
              <div class="card-body py-5 px-md-5">

                <!-- Login Form -->
                <form th:action="@{/login.html}" method="post">
                  <!-- Phone Number -->
                  <div class="form-outline mb-4">
                    <label class="form-label" for="username">Phone Number</label>
                    <input type="tel" id="username" name="username" class="form-control"/>
                  </div>

                  <!-- OTP input -->
                  <div class="form-outline mb-4">
                    <label class="form-label" for="password">OTP</label>
                    <input type="password" id="password" name ="password" class="form-control"/>
                  </div>

                  <!-- Sent otp -->
                  <button type="submit" class="btn bg-success btn-block mb-4" id="sendOTPBtn"
                          style="color: white;">Send OTP
                  </button>

                  <button type="submit" class="btn bg-success btn-block mb-4"
                          style="margin-left: 25px; color: white;">Login
                  </button>

                </form>

                <!-- Error message -->
                <div th:if="${errorMessage}" class="alert alert-danger" role="alert">
                  <span th:text="${errorMessage}"></span>
                </div>

              </div>
            </div>
          </div>
        </div>
      </section>
      <!-- Login Form END -->
    </div>
  </div>
  <!-- Login Form Section END -->
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function() {
      console.log("Function deepak -1");
      $('#sendOTPBtn').click(function(event) {
          event.preventDefault(); // Prevent form submission
          var username = $('#username').val();
          // Add the username parameter to the URL
          $.get('/sendotp?username=' + username, function(data, status) {
              console.log(username);
              if (status === 'success') {
                  alert('OTP sent successfully!');
              } else {
                  alert('Failed to send OTP. Please try again.');
              }
          });
      });
  });
</script>
</body>
</html>
